---

 - name: Installing unzip
   yum: name=unzip state=installed

 - name: Download Filebeat
   get_url:
     url: https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-5.6.3-x86_64.rpm
     dest: /opt

 - name: Install RPM package
   yum:
     name: /opt/filebeat-5.6.3-x86_64.rpm
     state: present

 - name: Download Packetbeat
   get_url:
     url: https://artifacts.elastic.co/downloads/beats/packetbeat/packetbeat-5.6.3-x86_64.rpm
     dest: /opt

 - name: Install RPM package for Packetbeat
   yum:
     name: /opt/packetbeat-5.6.3-x86_64.rpm
     state: present

 - name: Download Topbeat
   get_url:
     name: https://download.elastic.co/beats/topbeat/topbeat-1.3.1-x86_64.rpm
     dest: /opt

 - name: Install RPM package for Topbeat
   yum:
     name: /opt/topbeat-1.3.1-x86_64.rpm
     state: present

- name: Install Beats Dashboard
  get_url:
    url: http://download.elastic.co/beats/dashboards/beats-dashboards-1.1.0.zip
    dest: /opt

- name: Obtaining sample dashboards
  unarchive: 
    src=https://download.elastic.co/beats/dashboards/beats-dashboards-1.1.0.zip 
    dest=/opt/dashboards
    copy=no

- name: Installing sample dashboards
  command: sh load.sh
  args:
    chdir: '/opt/dashboards/beats-dashboards-1.1.0'